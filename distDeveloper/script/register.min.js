"use strict";function setAttributes(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}function getIndex(t){var e=t.parentNode.childNodes,n=0;for(n;n<e.length&&t!==e[n];n++);return n}function selectInit(t){t.forEach(function(t){var e=t,n=e.children,i=e.closest(".form__select"),a=e.nextElementSibling,o=document.createElement("ul");o.setAttribute("class","form__select-option");for(var r=0;r<n.length;r++){var s=document.createElement("li");setAttributes(s,{class:"form__select-item"}),s.innerText=n[r].value,s.addEventListener("click",function(t){for(var n=t.target.innerText,i=getIndex(t.target),r=e.getElementsByTagName("option"),s=r[i],l=new Event("change"),d=0;d<r.length;d++)r[d].removeAttribute("selected");s.setAttribute("selected",!0),e.dispatchEvent(l),a.setAttribute("value",n),o.removeAttribute("style")}),o.appendChild(s)}i.appendChild(o),a.addEventListener("click",function(t){var e=t.target,n=window.innerHeight,i=e.getBoundingClientRect(),a=document.querySelectorAll(".form__select-option"),o=e.nextElementSibling,r=i.top+i.height,s=n-i.bottom+i.height,l=i.left,d=i.width,c=n-i.bottom,h=n-i.bottom,m=i.top,u="";u=c>100?"top:"+r+"px;max-height:"+h+"px;":"bottom:"+s+"px;max-height:"+m+"px;";var p="display:block;left:"+l+"px; width:"+d+"px;"+u;a.forEach(function(t){t.removeAttribute("style")}),setAttributes(o,{style:p})})})}var validateForm={steps:{0:{},1:{},2:{}},fields:{first_name:{event:"blur",method:"textValidation"},surname:{event:"blur",method:"textValidation"},title:{event:"change",method:"notEmptyValidation"},gender:{event:"change",method:"notEmptyValidation"},type_of_institution:{event:"change",method:"notEmptyValidation"},speciality:{event:"change",method:"notEmptyValidation"},level_of_training:{event:"change",method:"notEmptyValidation"},hospital:{event:"change",method:"notEmptyValidation"},school:{event:"change",method:"notEmptyValidation"},country:{event:"change",method:"notEmptyValidation"},language:{event:"change",method:"notEmptyValidation"},email:{event:"blur",method:"emailValidation"},create_password:{event:"blur",method:"passwordValidation"},confirm_password:{event:"blur",method:"passwordValidation"}},pattern:{text:"^[a-z.0-9 ]+$",email:"^[a-z0-9]+[a-z0-9'._%+\\-]*[a-z0-9]*\\@(?:[a-z0-9]+(?:-[a-z0-9]+)*\\.)+[a-z]{2,}$"},patternText:function(t){return new RegExp(this.pattern.text,"gi").test(t)},patternEmail:function(t){return new RegExp(this.pattern.email,"gi").test(t)},init:function(){},setEventOnDataChange:function(t,e){var n=this.getFieldsNameArr(t)[0],i=this.getFieldsNameArr(t)[1];this.renderEvent(n,t),this.renderEvent(i,e)},renderEvent:function(t,e){t.map(function(t){document.getElementsByName(t).forEach(function(t){t.addEventListener(e,function(){validateForm.validateField(this)})})})},getFieldsNameArr:function(t){var e=[],n=[];for(var i in this.fields)this.fields.hasOwnProperty(i)&&(this.fields[i].event===t?e.push(i):n.push(i));return[e,n]},validateField:function(t){var e=t.name;console.log('{"'+t.name+'" : "'+t.value+'"}');for(var n in this.fields[e])this.fields[e].hasOwnProperty(n)&&this[this.fields[e].method](t)},textValidation:function(t){var e=t.value;return e.length<3||!this.patternText(e)?this.displayError(t):this.displayDone(t)},notEmptyValidation:function(t){return 0===t.value.toLowerCase().length?this.displayError(t):(this.selectingDisplayArea(t),this.displayDone(t))},emailValidation:function(t){var e=t.value;return this.patternEmail(e)?this.displayDone(t):this.displayError(t)},passwordValidation:function(t){var e=t.value;if(e.length<6)return this.displayError(t);if("confirm_password"===t.name){var n=document.getElementsByName("create_password")[0].value;if(e.length<6||n!==e)return this.displayError(t)}return this.displayDone(t)},displayError:function(t){var e=t.closest(".form__group");e.classList.remove("done"),e.classList.add("error")},displayDone:function(t){var e=t.closest(".form__group");e.classList.remove("error"),e.classList.add("done")},selectingDisplayArea:function(t){function e(){for(var t=document.getElementsByClassName("form__wrap"),e=0;e<t.length;e++)t[e].classList.remove("active")}function n(t){var n=document.getElementsByClassName(t)[0];e(),n.classList.add("active")}var i=t.value.toLowerCase();"type_of_institution"===t.name&&("hospital"===i?n("form__wrap_hospital"):"school"===i&&n("form__wrap_school"))}};!function(){selectInit(document.querySelectorAll("select")),validateForm.init(),validateForm.setEventOnDataChange("blur","change")}();